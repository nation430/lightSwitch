* {
  border: 0;
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}
:root {
  --transDur: 0.2s;
  --shadowA: -1.5em 0 1.5em #8d273100, 1.5em 0 1.5em #8d273100,
    0 0 3em #8d273144, 0 6.5em 3em #0002;
  --shadowB: -1.5em 0 1.5em #8d273100, 1.5em 0 1.5em #8d273100,
    0 3.25em 3em #8d273144, 0 6.5em 3em #0002;
  --shadowC: -1.5em 0 1.5em #8d273177, 1.5em 0 1.5em #8d273177,
    0 3.25em 3em #8d273144, 0 6.5em 3em #0002;
  --shadowD: -1.5em 0 1.5em #8d273177, 1.5em 0 1.5em #8d273177,
    0 6.5em 3em #8d273144, 0 6.5em 3em #0002;
  --switchOnA: linear-gradient(90deg, #ecc0, #ecc 0.05rem 0.45rem, #ecc0) 50%
      50% / 0.5rem 4rem no-repeat,
    linear-gradient(90deg, #0000, #0002 0.25rem 0.75rem, #0000) 50% 50% / 1rem
      4rem no-repeat,
    linear-gradient(#0000, #0003 0.25rem 4.25rem, #0000) 50% 50% / 0.5rem 4.5rem
      no-repeat,
    radial-gradient(12rem 6rem at 0 0, #95001100 25%, #95001100 50%),
    radial-gradient(12rem 6rem at 100% 0, #95001100 25%, #95001100 50%),
    radial-gradient(100% 75% at center, #ff002c, #ff002c00 50%) 0 0 / 0.6rem
      0.6rem,
    radial-gradient(6rem 9rem at 50% 10%, #ff002c00, #ff002c00 50%),
    radial-gradient(12rem 6rem at 0 90%, #ff002c00, #ff002c00 50%),
    radial-gradient(12rem 6rem at 100% 90%, #ff002c00, #ff002c00 50%),
    radial-gradient(
      9rem 9rem at 53% 87.5%,
      #ffc56400 5%,
      #ff002c00 20%,
      #ff002c00 50%
    ),
    linear-gradient(#a90020 87.5%, #d4001d);
  --switchOnB: linear-gradient(90deg, #ecc0, #ecc 0.05rem 0.45rem, #ecc0) 50%
      50% / 0.5rem 4rem no-repeat,
    linear-gradient(90deg, #0000, #0002 0.25rem 0.75rem, #0000) 50% 50% / 1rem
      4rem no-repeat,
    linear-gradient(#0000, #0003 0.25rem 4.25rem, #0000) 50% 50% / 0.5rem 4.5rem
      no-repeat,
    radial-gradient(12rem 6rem at 0 0, #950011 25%, #95001100 50%),
    radial-gradient(12rem 6rem at 100% 0, #950011 25%, #95001100 50%),
    radial-gradient(100% 75% at center, #ff002c, #ff002c00 50%) 0 0 / 0.6rem
      0.6rem,
    radial-gradient(6rem 9rem at 50% 10%, #ff002c, #ff002c00 50%),
    radial-gradient(12rem 6rem at 0 90%, #ff002c, #ff002c00 50%),
    radial-gradient(12rem 6rem at 100% 90%, #ff002c, #ff002c00 50%),
    radial-gradient(
      9rem 9rem at 53% 87.5%,
      #ffc564 5%,
      #ff002c 20%,
      #ff002c00 50%
    ),
    linear-gradient(#950011 87.5%, #c10017);
  --switchOffA: radial-gradient(
      4rem 4rem at center,
      #ecc0 1.45rem,
      #ecc 1.5rem 1.95rem,
      #ecc0 2rem
    ),
    radial-gradient(
      5rem 5rem at center,
      #0000 1rem,
      #0002 1.5rem 2rem,
      #0000 2.5rem
    ),
    radial-gradient(100% 75% at center, #ff002c 25%, #ff002c00 50%) 0 0 / 0.6rem
      0.6rem,
    radial-gradient(4rem 12rem at 50% 100%, #ff002c00, #ff002c00 50%),
    radial-gradient(12rem 6rem at 0 10%, #ff002c00, #ff002c00 50%),
    radial-gradient(12rem 6rem at 100% 10%, #ff002c00, #ff002c00 50%),
    radial-gradient(
      9rem 9rem at 50% 12.5%,
      #ffc56400 5%,
      #ff002c00 20%,
      #ff002c00 50%
    ),
    linear-gradient(#c10017, #c10017);
  --switchOffB: radial-gradient(
      4rem 4rem at center,
      #ecc0 1.45rem,
      #ecc 1.5rem 1.95rem,
      #ecc0 2rem
    ),
    radial-gradient(
      5rem 5rem at center,
      #0000 1rem,
      #0002 1.5rem 2rem,
      #0000 2.5rem
    ),
    radial-gradient(100% 75% at center, #ff002c 25%, #ff002c00 50%) 0 0 / 0.6rem
      0.6rem,
    radial-gradient(4rem 12rem at 50% 100%, #ff002c, #ff002c00 50%),
    radial-gradient(12rem 6rem at 0 10%, #ff002c, #ff002c00 50%),
    radial-gradient(12rem 6rem at 100% 10%, #ff002c, #ff002c00 50%),
    radial-gradient(
      9rem 9rem at 50% 12.5%,
      #ffc564 5%,
      #ff002c 20%,
      #ff002c00 50%
    ),
    linear-gradient(#c10017, #c10017);
  font-size: calc(12px + 6 * (100vw - 320px) / (1280 - 320));
}
body,
input {
  font: 1em/1.5 sans-serif;
}
body {
  background: #111;
  display: flex;
  height: 100vh;
}
form {
  background: linear-gradient(#454954, #2a272d);
  border-radius: 0.25em;
  box-shadow: 0 0 0 0.2em #000 inset, 0 0.3em 0 0 #737a8c inset;
  margin: auto;
  width: 16em;
  height: 20em;
}
label,
input[type="checkbox"]:before,
input[type="checkbox"]:after {
  display: block;
}
label {
  border-radius: 0.5em;
  box-shadow: 0 0.1em 0 #565057, 0 0 0 0.1em #2e3138, 0 0 0.2em 0.3em #000 inset,
    0 1em 0.2em 0 #000 inset, 0 -1em 0.2em 0 #000 inset,
    0.5em 0 0.1em #e7454e inset, 0.6em 0 0.1em #8d2731 inset,
    -0.5em 0 0.1em #e7454e inset, -0.6em 0 0.1em #8d2731 inset,
    0 1.5em 0.2em 0 #800007 inset, 0 2em 0.2em 0 #8d2731 inset,
    0 3em 0.2em 0 #ff8a90 inset, 0 4em 0.2em 0 #f8f4f6 inset,
    0 -1.5em 0.3em 0 #a0001c inset, 0 -2em 0.2em 0 #9f0020 inset,
    0 -3em 0.2em 0 #ae1433 inset, 0 -3.5em 0.2em 0 #941028 inset;
  margin: 1.5em;
  width: 13em;
  height: 17em;
}
input[type="checkbox"],
input[type="checkbox"]:before,
input[type="checkbox"]:after {
  transform-style: preserve-3d;
}
input[type="checkbox"] {
  animation: shadowOff var(--transDur) ease-in-out;
  box-shadow: var(--shadowA);
  cursor: pointer;
  position: relative;
  top: 1.5em;
  left: 0.5em;
  width: 12em;
  height: 14em;
  transform: rotateX(-20deg) translateZ(0.75em);
  transition: transform var(--transDur) ease-in-out;
  appearance: none;
}
input[type="checkbox"]:checked {
  animation: shadowOn var(--transDur) ease-in-out;
  box-shadow: var(--shadowD);
  transform: rotateX(20deg) translateZ(0.75em);
}
input[type="checkbox"]:before,
input[type="checkbox"]:after {
  color: #fff;
  content: "";
  filter: brightness(0.7);
  font-size: 5.5em;
  position: absolute;
  text-align: center;
  transition: box-shadow var(--transDur) ease-in-out,
    filter var(--transDur) ease-in-out;
  width: 100%;
  height: 50%;
}
input[type="checkbox"]:before {
  animation: switchBeforeOff var(--transDur) steps(1, start);
  background: var(--switchOnA);
  box-shadow: 0 0.2rem 0 0 #fff0 inset, -0.5rem -0.5rem 0.5rem #0000,
    0.5rem -0.5rem 0.5rem #0000;
  top: 0;
  transform: rotateX(-20deg);
  transform-origin: 50% 100%;
  z-index: 1;
}
input[type="checkbox"]:after {
  animation: switchAfterOff var(--transDur) steps(1, start);
  background: var(--switchOffA);
  box-shadow: 0 -0.2rem 0 0 #fff0 inset, -0.5rem 0 0.5rem #0007,
    0.5rem 0 0.5rem #0007;
  top: 50%;
  transform: rotateX(20deg);
  transform-origin: 50% 0%;
}
input[type="checkbox"]:checked:before,
input[type="checkbox"]:checked:after {
  filter: brightness(1);
}
input[type="checkbox"]:checked:before {
  animation: switchBeforeOn var(--transDur) steps(1, start) forwards;
  box-shadow: 0 0.2rem 0 0 #fff inset, -0.5rem -0.5rem 0.5rem #0007,
    0.5rem -0.5rem 0.5rem #0007;
}
input[type="checkbox"]:checked:after {
  animation: switchAfterOn var(--transDur) steps(1, start) forwards;
  box-shadow: 0 -0.2rem 0 0 #fff7 inset, -0.5rem 0 0.5rem #0000,
    0.5rem 0 0.5rem #0000;
}
input[type="checkbox"]:focus {
  outline: transparent;
}
input[type="checkbox"].pristine,
input[type="checkbox"].pristine:before,
input[type="checkbox"].pristine:after {
  animation: none;
}

/* Animations */
@keyframes shadowOn {
  from {
    box-shadow: var(--shadowA);
  }
  50% {
    box-shadow: var(--shadowB);
  }
  51% {
    box-shadow: var(--shadowC);
  }
  to {
    box-shadow: var(--shadowD);
  }
}
@keyframes shadowOff {
  from {
    box-shadow: var(--shadowD);
  }
  50% {
    box-shadow: var(--shadowC);
  }
  51% {
    box-shadow: var(--shadowB);
  }
  to {
    box-shadow: var(--shadowA);
  }
}
@keyframes switchBeforeOn {
  from,
  50% {
    background: var(--switchOnA);
  }
  to {
    background: var(--switchOnB);
  }
}
@keyframes switchBeforeOff {
  from,
  50% {
    background: var(--switchOnB);
  }
  to {
    background: var(--switchOnA);
  }
}
@keyframes switchAfterOn {
  from,
  50% {
    background: var(--switchOffA);
  }
  to {
    background: var(--switchOffB);
  }
}
@keyframes switchAfterOff {
  from,
  50% {
    background: var(--switchOffB);
  }
  to {
    background: var(--switchOffA);
  }
}
